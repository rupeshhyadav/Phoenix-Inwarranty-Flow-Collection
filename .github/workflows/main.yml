name : Postman Collection Workflow
on : 
  push : 
    branches : [main]
  workflow_dispatch :
  schedule : 
    - cron : 30 02 * * * 
    - cron : 00 14 * * * 
jobs : 
  run-postman-tests : 
    runs-on : ubuntu-latest

    steps : 
      - name : Checkout the code
        uses : actions/checkout@v4.2.2

      - name : Install node js and npm
        uses : actions/setup-node@v3.9.1
        with : 
         node-version : '22'
      - name : Install newman and html-extra globally
        run : |
              npm install -g newman
              npm install -g newman-reporter-htmlextra
      - name : Run postman collection with newman
        run : |
              newman run 'Inwarranty-flow-collection.postman_collection.json' \
              -e QA.postman_environment.json \
              -r cli
      - name : Newman report
        if: always()
        uses : actions/upload-artifact@v4.6.2
        with :
            name : Newman report
            path : /newman/*.html
      
        
